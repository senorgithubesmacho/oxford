<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Digital Media</title>
</head>
<body>
<!--
PASTE THIS ENTIRE BLOCK INTO ONE SITELY HTML EMBED.

Notes:
- The video src below uses your current local Sitely preview URL. This will not work after publishing unless the published URL is used.
- Replace VIDEO_SRC with the final published mp4 URL when ready.
- Typeface is forced to sans-serif.
-->

<div id="opa-dm-page">
  <style>
    :root{
      --bg:#ffffff;
      --text:#111827;
      --muted:#6b7280;
      --line:#e5e7eb;
      --blue:#2563eb;      /* primary */
      --orange:#f59e0b;    /* complementary */
      --maxw: 980px;
    }

    /* Scope all styles to this embed */
    #opa-dm-page, #opa-dm-page *{ box-sizing:border-box; }
    #opa-dm-page{
      background:var(--bg);
      color:var(--text);
      font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Inter", "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    /* ---------- Scrolly hero ---------- */
    .scrolly{
      position: relative;
      width:100%;
      background:var(--bg);
    }

    /* The sticky zone holds the video + copy while you scroll through the steps */
    .sticky{
      position: sticky;
      top: 0;
      padding: clamp(18px, 3vw, 28px) 0;
      background: var(--bg);
      z-index: 1;
    }

    .hero{
      width:min(var(--maxw), 92vw);
      margin: 0 auto;
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: clamp(18px, 3.5vw, 44px);
      align-items: center;
    }

    /* Stack on smaller screens */
    @media (max-width: 860px){
      .hero{ grid-template-columns: 1fr; }
      .copy-frame{ aspect-ratio: auto; min-height: 220px; }
    }

    .video-frame, .copy-frame{
      width:100%;
      aspect-ratio: 16 / 9;
      border-radius: 18px;
      overflow: hidden;
    }

    /* Video: no extra border/frame, just the media */
    .video-frame{
      background:#f3f4f6;
      border: 0;
    }
    .video-frame video{
      width:100%;
      height:100%;
      object-fit: cover;
      display:block;
    }

    /* Copy window: same size as video; visually frameless */
    .copy-frame{
      border: 0;
      background: transparent;
      border-radius: 0;
      overflow: visible;
      display:flex;
      align-items:center;
      position: relative;
    }

    .copy-inner{
      width:100%;
      padding: clamp(6px, 1vw, 10px);
      position: relative;
      /* subtle “from nowhere” fade at top/bottom without a box */
      -webkit-mask-image: linear-gradient(to bottom, transparent, black 10%, black 90%, transparent);
      mask-image: linear-gradient(to bottom, transparent, black 10%, black 90%, transparent);
    }

    .slide{
      display:none;
      width:100%;
    }
    .slide.is-active{ display:block; }

    .kicker{
      font-size: 12px;
      letter-spacing: .18em;
      text-transform: uppercase;
      color: var(--muted);
      margin: 0 0 10px 0;
    }

    .headline{
      margin: 0 0 12px 0;
      font-size: clamp(26px, 3.2vw, 40px);
      line-height: 1.05;
      font-weight: 800;
      color: var(--text);
    }
    .headline .em{ color: var(--blue); }

    /* Body copy: “reasonable” but clearly readable */
    .body{
      margin: 0;
      font-size: clamp(16px, 1.45vw, 19px);
      line-height: 1.5;
      color: #374151;
      max-width: 48ch;
    }
    .body strong{ color: var(--text); font-weight: 800; }

    /* Minimal progress dots (optional, clean) */
    .dots{
      position:absolute;
      right: -10px;
      top: 50%;
      transform: translateY(-50%);
      display:flex;
      flex-direction: column;
      gap: 8px;
      opacity: .9;
    }
    @media (max-width: 860px){
      .dots{ display:none; }
    }
    .dot{
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: #cbd5e1;
      transition: transform .2s ease, background .2s ease;
    }
    .dot.is-active{
      background: var(--blue);
      transform: scale(1.25);
    }

    /* Steps: invisible scroll drivers */
    .steps{
      width:min(var(--maxw), 92vw);
      margin: 0 auto;
      padding: 0;
    }
    .step{
      height: 24vh;           /* controls how long each slide stays up */
      border: 0;
    }

    /* After the last step, let the sticky area release */
    .after-scrolly{
      height: 0vh;
    }

    /* ---------- Syllabus typography ---------- */
    .syllabus{
      width:min(var(--maxw), 92vw);
      margin: 0 auto;
      padding: clamp(34px, 5vw, 54px) 0 24px;
      border-top: 1px solid var(--line);
    }

    .syllabus h2{
      margin: 0 0 12px 0;
      font-size: clamp(24px, 2.6vw, 32px);
      line-height: 1.15;
      color: var(--blue);
      font-weight: 800;
    }

    .syllabus p{
      font-size: clamp(17px, 1.25vw, 19px);
      line-height: 1.7;
      color: #374151;
      max-width: 74ch;
    }

    .syllabus .lead{
      font-size: clamp(18px, 1.35vw, 20px);
      color: #1f2937;
    }

    .syllabus h3{
      font-size: 15px;
      letter-spacing: .14em;
      text-transform: uppercase;
      color: var(--orange);
      font-weight: 800;
    }

    .syllabus .section-title{
      margin-top: 34px;
      padding-top: 6px;
    }

    .syllabus ul{
      font-size: clamp(17px, 1.25vw, 19px);
      line-height: 1.7;
      max-width: 74ch;
    }

    .syllabus li{ margin: 6px 0; }

    .syllabus blockquote{
      margin: 16px 0;
      padding: 12px 14px;
      border-left: 3px solid var(--line);
      color: #374151;
      background: #fafafa;
      border-radius: 10px;
      max-width: 74ch;
    }

    .syllabus em{ font-style: italic; }
  
  
    /* =========================
       OPA PATCH: Full-screen hero + scroll-driven slide swap + fade handoff
       ========================= */

    :is(#opa-dm-page,#opa-hero-syllabus,#opaHeroSyllabus) .hero{
      height: calc(var(--opaSteps, 8) * 100vh) !important;
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }

    :is(#opa-dm-page,#opa-hero-syllabus,#opaHeroSyllabus) .heroGrid.opaPin,
    :is(#opa-dm-page,#opa-hero-syllabus,#opaHeroSyllabus) .hero-grid.opaPin{
      position: sticky;
      top: 0;
      height: 100vh;
      align-items: center;
      opacity: var(--heroOpacity, 1);
      transform: translateY(calc(var(--heroLift, 0) * 1px));
      transition: opacity 120ms linear, transform 120ms linear;
      will-change: opacity, transform;
    }

    :is(#opa-dm-page,#opa-hero-syllabus,#opaHeroSyllabus) .scroller{
      height: 100% !important;
      overflow: hidden !important;
      scroll-snap-type: none !important;
      padding-right: 0 !important;
      position: relative;
    }

    :is(#opa-dm-page,#opa-hero-syllabus,#opaHeroSyllabus) .step{
      position: absolute;
      inset: 0;
      height: 100% !important;
      min-height: 100% !important;
      padding: clamp(18px, 3vw, 34px) !important;
      display: flex;
      flex-direction: column;
      justify-content: center;
      gap: 12px;
      opacity: 0;
      transform: translateY(10px);
      transition: opacity 340ms ease, transform 340ms ease;
      pointer-events: none;
    }

    :is(#opa-dm-page,#opa-hero-syllabus,#opaHeroSyllabus) .step.opaActive{
      opacity: 1;
      transform: translateY(0);
      pointer-events: auto;
    }

    :is(#opa-dm-page,#opa-hero-syllabus,#opaHeroSyllabus) .after-scrolly{
      height: 0 !important;
      margin: 0 !important;
      padding: 0 !important;
    }

    :is(#opa-dm-page,#opa-hero-syllabus,#opaHeroSyllabus) .divider{
      margin: 0 !important;
    }

    :is(#opa-dm-page,#opa-hero-syllabus,#opaHeroSyllabus) .syllabus{
      margin-top: 0 !important;
      padding-top: clamp(18px, 3vh, 28px) !important;
      opacity: var(--syllOpacity, 1);
      transition: opacity 120ms linear;
    }

</style>

  <section class="scrolly" aria-label="Digital Media intro scrollytelling">
    <div class="sticky">
      <div class="hero">
        <div class="video-frame">
          <video controls playsinline preload="metadata" src="video/reshoot_up_1080p_202601032210_faststart.mp4"></video>
        </div>

        <div class="copy-frame">
          <div class="copy-inner" id="dm-copy">
            <div class="slide is-active" data-slide="0">
              <p class="kicker">Digital Media</p>
              <h1 class="headline">Old brain, <span class="em">new</span> machines.</h1>
              <p class="body">Our brains are built for <strong>survival</strong> and <strong>social life</strong>, not nonstop digital input.</p>
            </div>

            <div class="slide" data-slide="1">
              <p class="kicker">What’s changing</p>
              <h1 class="headline">Tools scale <span class="em">fast</span>.</h1>
              <p class="body">Modern devices and AI get <strong>stronger</strong> every year. People do not evolve that fast.</p>
            </div>

            <div class="slide" data-slide="2">
              <p class="kicker">The risk</p>
              <h1 class="headline">The <span class="em">mismatch</span>.</h1>
              <p class="body">That gap creates problems: <strong>distraction</strong>, <strong>bad info</strong>, and other people shaping our choices.</p>
            </div>

            <div class="slide" data-slide="3">
              <p class="kicker">The pattern</p>
              <h1 class="headline">Humans <span class="em">adapt</span>.</h1>
              <p class="body">This isn’t the first time powerful tools changed the world. We respond by improving how we <strong>think</strong> and <strong>decide</strong>.</p>
            </div>

            <div class="slide" data-slide="4">
              <p class="kicker">Back to basics</p>
              <h1 class="headline">Build a <span class="em">process</span>.</h1>
              <p class="body"><strong>Goal</strong>. <strong>Audience</strong>. <strong>Test</strong>. <strong>Revise</strong>. Explain your decisions.</p>
            </div>

            <div class="slide" data-slide="5">
              <p class="kicker">Stay in control</p>
              <h1 class="headline">AI can <span class="em">help</span>.</h1>
              <p class="body">AI can speed up output. It cannot replace <strong>judgment</strong>, <strong>taste</strong>, or <strong>responsibility</strong>.</p>
            </div>

            <div class="slide" data-slide="6">
              <p class="kicker">What you build here</p>
              <h1 class="headline">Build <span class="em">proof</span>.</h1>
              <p class="body">You will create real projects and document the process. Your portfolio shows your <strong>thinking</strong>, not just polish.</p>
            </div>
          </div>

          <div class="dots" aria-hidden="true" id="dm-dots">
            <div class="dot is-active" data-dot="0"></div>
            <div class="dot" data-dot="1"></div>
            <div class="dot" data-dot="2"></div>
            <div class="dot" data-dot="3"></div>
            <div class="dot" data-dot="4"></div>
            <div class="dot" data-dot="5"></div>
            <div class="dot" data-dot="6"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Scroll driver steps (invisible) -->
    <div class="steps" id="dm-steps" aria-hidden="true">
      <div class="step" data-step="0"></div>
      <div class="step" data-step="1"></div>
      <div class="step" data-step="2"></div>
      <div class="step" data-step="3"></div>
      <div class="step" data-step="4"></div>
      <div class="step" data-step="5"></div>
      <div class="step" data-step="6"></div>
      <div class="after-scrolly"></div>
    </div>
  </section>

  <section class="syllabus" aria-label="Course syllabus">
    <h2>Course Syllabus</h2>
    <p class="lead">A central goal of this course is to build critical thinking and creative judgment in an era of <em>Superficial Intelligence</em>; where AI can generate polished results that mask shallow understanding. AI can accelerate work, but it cannot replace decision-making, intent, taste, or problem-solving.</p>
    <p>This is a studio style class where design fundamentals, CTE, and project based learning intersect with industry-grade, closed source AI tools. Students work in professional creative environments such as Adobe Creative Cloud and select Google creative tools. These platforms reflect how modern visual communication is produced but they are not the focus of the class.</p>
    <p>By grounding projects in real-world CTE and PBL frameworks, students develop transferable skills—design thinking, visual literacy, planning, iteration, critique, and ethical reasoning that remain valuable regardless of how tools change. AI is treated as a tool, not a shortcut, and students are expected to remain intellectually in control of their work.</p>

    <h2 class="section-title">How the Class Works</h2>
    <p>We begin with short orientation projects to learn core tools and class routines. The year then moves through multi-week projects (typically 4–10 weeks, sometimes longer). Each project increases in complexity as skills grow.</p>

    <h3>Project Proposal</h3>
    <p>Students pitch an idea, declare the final deliverable (for example, a short video, brand kit, or interactive piece), and set measurable goals. The proposal guides feedback and grading.</p>

    <h3>Student as Project Manager</h3>
    <p>Students plan milestones and manage their tools as the “team.” They evaluate fit, learn what is needed, handle setup and troubleshooting, and pivot when appropriate. AI may handle routine tasks; students steer vision and quality.</p>

    <h3>Skill and Tool Sprints</h3>
    <p>Mini lessons—composition, typography, prompt writing, Veo storyboarding, Firefly controls—applied immediately to current work.</p>

    <h3>Weekly Check-Ins</h3>
    <p>Regular critiques and self-assessments keep work aligned to the pitch and support smart adjustments.</p>

    <h3>Creative Portfolio</h3>
    <p>All work lives in each student’s Creative Portfolio: a running visual record of learning, choices, inspirations, and iterations. Students add a brief written or recorded reflection on wins, challenges, and tool impact (including AI).</p>

    <h2 class="section-title">Grading</h2>

    <h3>Daily Grading</h3>
    <p>Students earn 10 points daily (50 points weekly). Points are lost when students violate school-wide or classroom policies. These policies protect both students and equipment. Policies include:</p>
    <ul>
      <li>Cell phones must be stored in backpacks during class.</li>
      <li>No eating in class.</li>
      <li>No liquids except water are allowed in class. Water must be in a sealed container and is not permitted on computer tables.</li>
      <li>Computer use unrelated to the student's project is prohibited.</li>
    </ul>

    <h3>Project Presentations (grading component)</h3>
    <p>Each project concludes with a Project Presentation inside the student’s Creative Journey Portfolio, organized by our Project Pipeline.</p>
    <ul>
      <li><strong>Think It</strong> – Proposal, purpose, audience, constraints; mood board/visual references; inclusivity statement and (when applicable) selected Champion Profiles.</li>
      <li><strong>Plan It</strong> – Clear goals and final deliverable; milestone schedule; tool stack and access plan (AI or otherwise), including what must be learned, installed, or tested.</li>
      <li><strong>Make It</strong> – Evidence of process: drafts, versions, prompt iterations, tests, troubleshooting notes, and mid-course pivots with reasoning.</li>
      <li><strong>Show It</strong> – Final artifact placed in the portfolio with brief captions, credits, and safety/provenance notes (e.g., Firefly/Google metadata, licensed assets).</li>
      <li><strong>Assess It</strong> – Concise reflection connecting outcomes to the original plan, feedback received, what changed and why, and next-step improvements.</li>
    </ul>
    <p>Project Presentations are the primary grading evidence and emphasize learning, responsible tool management, and ethical use over polish alone.</p>

    <h2 class="section-title">AI Safety</h2>
    <p>Safety and ethics are non-negotiable. All generative assets are created in closed-source Adobe and Google systems with classroom safeguards and teacher review before anything is shared.</p>
    <p>Digital media is central to AI literacy. Mastering Adobe Creative Cloud, Google’s creative AI, and tools like ChatGPT is about responsible, creative, and critical use across subjects—not only about making art. This course provides comprehensive, hands-on practice in proper AI use (prompt writing, bias awareness, safety) and responsible transfer to other classes. The approach aligns with the ISTE Standards for Students and builds long-term digital citizenship and creative communication.</p>
    <p>Understanding these powerful tools alongside their proper uses and potential harms will be an ongoing discussion topic throughout the school year.</p>

    <h2 class="section-title">Why This Matters Right Now</h2>
    <blockquote>
      According to Character.ai CEO Karandeep Anand, users spend an average of 80 minutes a day chatting with AI-generated fictional characters. That puts Character.ai nearly on par with apps like TikTok (95 minutes) and YouTube (84 minutes), and ahead of Instagram (70 minutes). The numbers help explain why Meta CEO Mark Zuckerberg is now putting a bigger emphasis on personalized chatbots across his own platforms.
    </blockquote>
    <p>Character.ai currently has 20 million monthly active users. Half are women, and most are Gen Z or even younger. Critics warn that these kinds of apps can create emotional dependencies among young people and have called for them to be banned for minors. In the US, several lawsuits are underway over alleged harm to children, including one involving a suicide. Character.ai has responded by offering a separate model for users under 18 and now warns against excessive use.</p>

    <h3>Art students face unique risks</h3>
    <p>Art students are the first generation to confront the ethical challenges of AI in creative work. That means big questions about labeling AI-generated content, defining originality, and drawing the line between help and cheating. Intense competition and pressure for originality in China's education system make the temptation even greater, the researchers write.</p>
    <p>"With AI becoming an integral part of the creative process, students have to face questions about the originality of AI-assisted work and the possibility of plagiarism," the study says. For example, an art student might use AI to generate visual concepts or imitate a style, blurring the line between legitimate help and academic dishonesty.</p>
  </section>

  <script>
    (function(){
      const root = document.getElementById('opa-dm-page');
      if(!root) return;

      const slides = Array.from(root.querySelectorAll('.slide'));
      const dots = Array.from(root.querySelectorAll('.dot'));
      const steps = Array.from(root.querySelectorAll('.step'));

      function setActive(i){
        slides.forEach(s => s.classList.toggle('is-active', Number(s.dataset.slide) === i));
        dots.forEach(d => d.classList.toggle('is-active', Number(d.dataset.dot) === i));
      }

      // Start with slide 0
      setActive(0);

      // Use IntersectionObserver to swap slides as the user scrolls
      const io = new IntersectionObserver((entries) => {
        // Pick the most visible intersecting step
        const visible = entries
          .filter(e => e.isIntersecting)
          .sort((a,b) => b.intersectionRatio - a.intersectionRatio)[0];
        if(!visible) return;
        const idx = Number(visible.target.dataset.step);
        if(Number.isFinite(idx)) setActive(idx);
      }, {
        root: null,
        threshold: [0.35, 0.5, 0.65]
      });

      steps.forEach(step => io.observe(step));
    })();
  </script>
</div>


<script>
  (function(){
    const root = document.querySelector('#opa-dm-page,#opa-hero-syllabus,#opaHeroSyllabus');
    if(!root) return;

    const hero = root.querySelector('.hero');
    const grid = root.querySelector('.heroGrid') || root.querySelector('.hero-grid');
    const steps = Array.from(root.querySelectorAll('.step'));
    const dots = Array.from(root.querySelectorAll('.dot'));
    const syllabus = root.querySelector('.syllabus');

    if(!hero || !grid || steps.length === 0) return;

    grid.classList.add('opaPin');
    root.style.setProperty('--opaSteps', String(steps.length + 1));

    let active = 0;
    steps.forEach((s,i)=> s.classList.toggle('opaActive', i === 0));
    dots.forEach((d,i)=> d.classList.toggle('active', i === 0));

    const clamp = (n,a,b)=> Math.max(a, Math.min(b, n));

    function setActive(idx){
      if(idx === active) return;
      steps[active]?.classList.remove('opaActive');
      dots[active]?.classList.remove('active');
      steps[idx]?.classList.add('opaActive');
      dots[idx]?.classList.add('active');
      active = idx;
    }

    function onScroll(){
      const rect = hero.getBoundingClientRect();
      const vh = window.innerHeight || 1;

      // If we’re past the hero, force final state.
      if(rect.bottom <= vh * 0.2){
        root.style.setProperty('--heroOpacity', '0');
        root.style.setProperty('--heroLift', '-28');
        root.style.setProperty('--syllOpacity', '1');
        setActive(steps.length - 1);
        return;
      }

      const total = Math.max(1, rect.height - vh);
      const scrolled = clamp(-rect.top, 0, total);
      const progress = scrolled / total; // 0..1

      const n = steps.length;
      const slidesPortion = n / (n + 1);
      const handoffStart = slidesPortion;

      const slideProgress = clamp(progress / slidesPortion, 0, 0.999999);
      const idx = clamp(Math.floor(slideProgress * n), 0, n - 1);
      setActive(idx);

      // Fade handoff (Option 1)
      const t = clamp((progress - handoffStart) / (1 - handoffStart), 0, 1);
      const heroOpacity = 1 - t;
      const syllOpacity = clamp(t * 1.1, 0, 1);

      root.style.setProperty('--heroOpacity', heroOpacity.toFixed(3));
      root.style.setProperty('--heroLift', String((-t * 28).toFixed(2)));
      root.style.setProperty('--syllOpacity', syllOpacity.toFixed(3));
    }

    window.addEventListener('scroll', onScroll, {passive:true});
    window.addEventListener('resize', onScroll);
    onScroll();

    // Autoplay assist (muted + playsinline already). Ignore failures silently.
    const v = root.querySelector('video');
    if(v){
      const tryPlay = ()=>{ const p = v.play(); if(p && p.catch) p.catch(()=>{}); };
      setTimeout(tryPlay, 150);
      document.addEventListener('visibilitychange', ()=>{ if(!document.hidden) tryPlay(); });
    }

    // When syllabus is visible, lock it fully on.
    if(syllabus){
      const io = new IntersectionObserver((entries)=>{
        entries.forEach(e=>{ if(e.isIntersecting) root.style.setProperty('--syllOpacity','1'); });
      }, {threshold: 0.06});
      io.observe(syllabus);
    }

  })();
</script>


<!-- OPA PATCH v2 (fixed pin): appended overrides to prevent Sitely sticky issues -->
<style>
  :root{ --heroOpacity: 1; --heroLift: 0; --syllOpacity: 1; }

  /* Fixed pin container applied by JS */
  .opaFixed{
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    width: 100vw !important;
    height: 100vh !important;
    z-index: 9999 !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    pointer-events: auto !important;
    opacity: var(--heroOpacity, 1) !important;
    transform: translateY(calc(var(--heroLift, 0) * 1px)) !important;
    transition: opacity 120ms linear, transform 120ms linear;
    will-change: opacity, transform;
    background: transparent;
  }

  /* Spacer to preserve scroll length */
  .opaHeroSpacer{ height: calc(var(--opaSteps, 8) * 100vh) !important; }

  /* Convert inner scroller into slide stage (no internal scroll) */
  .scroller{
    height: 100% !important;
    overflow: hidden !important;
    scroll-snap-type: none !important;
    padding-right: 0 !important;
    position: relative !important;
  }

  /* Stack steps as slides */
  .step{
    position: absolute !important;
    inset: 0 !important;
    height: 100% !important;
    min-height: 100% !important;
    opacity: 0 !important;
    transform: translateY(10px) !important;
    transition: opacity 340ms ease, transform 340ms ease;
    pointer-events: none !important;
  }

  .step.opaActive{
    opacity: 1 !important;
    transform: translateY(0) !important;
    pointer-events: auto !important;
  }

  /* Remove dead gap */
  .after-scrolly{ height: 0 !important; margin: 0 !important; padding: 0 !important; }

  /* Fade syllabus in during handoff */
  .syllabus{
    margin-top: 0 !important;
    padding-top: clamp(18px, 3vh, 28px) !important;
    opacity: var(--syllOpacity, 1) !important;
    transition: opacity 120ms linear;
  }
</style>

<script>
  (function(){
    if(window.__opaHeroPatchApplied) return;
    window.__opaHeroPatchApplied = true;

    const root = document.querySelector('#opa-dm-page,#opa-hero-syllabus,#opaHeroSyllabus')
      || document.querySelector('[id^="opa-"]')
      || document.body;

    const hero = root.querySelector('.hero');
    const grid = root.querySelector('.heroGrid') || root.querySelector('.hero-grid') || root.querySelector('.heroGrid');
    const steps = Array.from(root.querySelectorAll('.step'));
    const dots = Array.from(root.querySelectorAll('.dot'));
    const syllabus = root.querySelector('.syllabus');

    if(!hero || !grid || steps.length === 0) return;

    // Create spacer after hero once
    let spacer = root.querySelector('.opaHeroSpacer');
    if(!spacer){
      spacer = document.createElement('div');
      spacer.className = 'opaHeroSpacer';
      hero.parentNode.insertBefore(spacer, hero.nextSibling);
    }

    // Runway: (slides + handoff) * 100vh
    const setSteps = () => {
      root.style.setProperty('--opaSteps', String(steps.length + 1));
      spacer.style.height = `calc(${steps.length + 1} * 100vh)`;
    };
    setSteps();

    // Make first step visible
    let active = 0;
    steps.forEach((s,i)=> s.classList.toggle('opaActive', i===0));
    dots.forEach((d,i)=> d.classList.toggle('active', i===0));

    const clamp = (n,a,b)=> Math.max(a, Math.min(b, n));

    function setActive(idx){
      if(idx === active) return;
      steps[active]?.classList.remove('opaActive');
      dots[active]?.classList.remove('active');
      steps[idx]?.classList.add('opaActive');
      dots[idx]?.classList.add('active');
      active = idx;
    }

    // Pin target: closest container that keeps your max width
    const pinTarget = grid.parentElement || grid;

    function applyFixed(on){
      if(on) pinTarget.classList.add('opaFixed');
      else pinTarget.classList.remove('opaFixed');
    }

    function onScroll(){
      const vh = window.innerHeight || 1;
      const heroTopDoc = hero.getBoundingClientRect().top + (window.scrollY || window.pageYOffset || 0);
      const scrollY = window.scrollY || window.pageYOffset || 0;

      const total = (steps.length + 1) * vh - vh; // runway minus one viewport
      const scrolled = clamp(scrollY - heroTopDoc, 0, total);
      const progress = total > 0 ? scrolled / total : 0;

      // Fixed while hero is active
      const inHero = (scrollY >= heroTopDoc) && (scrollY <= heroTopDoc + total);
      applyFixed(inHero);

      // Slide selection
      const n = steps.length;
      const slidesPortion = n / (n + 1);
      const handoffStart = slidesPortion;

      const slideProgress = clamp(progress / slidesPortion, 0, 0.999999);
      const idx = clamp(Math.floor(slideProgress * n), 0, n - 1);
      setActive(idx);

      // Fade handoff (Option 1)
      const t = clamp((progress - handoffStart) / (1 - handoffStart), 0, 1);
      root.style.setProperty('--heroOpacity', (1 - t).toFixed(3));
      root.style.setProperty('--heroLift', String((-t * 28).toFixed(2)));
      root.style.setProperty('--syllOpacity', clamp(t * 1.1, 0, 1).toFixed(3));

      // Past runway: lock syllabus on
      if(scrollY > heroTopDoc + total){
        applyFixed(false);
        root.style.setProperty('--syllOpacity','1');
      }
    }

    window.addEventListener('scroll', onScroll, {passive:true});
    window.addEventListener('resize', ()=>{ setSteps(); onScroll(); });
    onScroll();

    // Autoplay assist
    const v = root.querySelector('video');
    if(v){
      const tryPlay = ()=>{ const p = v.play(); if(p && p.catch) p.catch(()=>{}); };
      setTimeout(tryPlay, 150);
      document.addEventListener('visibilitychange', ()=>{ if(!document.hidden) tryPlay(); });
    }

    // Intersection lock for syllabus
    if(syllabus){
      const io = new IntersectionObserver((entries)=>{
        entries.forEach(e=>{ if(e.isIntersecting) root.style.setProperty('--syllOpacity','1'); });
      }, {threshold: 0.06});
      io.observe(syllabus);
    }

  })();
</script>
</body>
</html>
